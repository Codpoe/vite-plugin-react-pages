var e=Object.defineProperty,a=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,l=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,o=(e,o)=>{for(var s in o||(o={}))a.call(o,s)&&l(e,s,o[s]);if(t)for(var s of t(o))n.call(o,s)&&l(e,s,o[s]);return e};import{c as s,L as r}from"./clientRender.4d8779ba.js";import{M as i}from"./theme-interface.330792d1.js";const p={};function m(e){var{components:l}=e,m=((e,l)=>{var o={};for(var s in e)a.call(e,s)&&l.indexOf(s)<0&&(o[s]=e[s]);if(null!=e&&t)for(var s of t(e))l.indexOf(s)<0&&n.call(e,s)&&(o[s]=e[s]);return o})(e,["components"]);return s("wrapper",o(o(o({},p),m),{components:l,mdxType:"MDXLayout"}),s("h1",null,"Page data"),s("p",null,s("strong",{parentName:"p"},"Essentially, vite-pages is a React app framework that collect your pages data and pass them to your theme.")," So what kinds of data does it collect?"),s("p",null,"Each page consists of two kinds of data:"),s("ul",null,s("li",{parentName:"ul"},"Static data"),s("li",{parentName:"ul"},"Runtime data")),s("p",null,"Both of these page data are passed to the theme so that it can render the app."),s("h2",null,"Static data"),s("p",null,"Static data usually contains the matadata of a page. Static data of ",s("strong",{parentName:"p"},"all pages")," is loaded ",s("strong",{parentName:"p"},"eagerly")," when the app bootstrap, so that the theme can render a nav menu or a search box with this infomation."),s("blockquote",null,s("p",{parentName:"blockquote"},"You should try to keep the static data as small as possible.")),s("p",null,"For ",s("inlineCode",{parentName:"p"},".tsx|.jsx")," pages, you can define static data with ",s("strong",{parentName:"p"},"a docblock(comment) at the top of the file"),"."),s("pre",null,s("code",o({parentName:"pre"},{className:"language-tsx"}),"/**\n * @title index page\n * @tags tag1,tag2\n */\n")),s("p",null,"This will be collected as:"),s("pre",null,s("code",o({parentName:"pre"},{className:"language-json"}),'{ "title": "index page", "tags": "tag1,tag2" }\n')),s("p",null,"For ",s("inlineCode",{parentName:"p"},".md|.mdx")," pages, you can define static data with YAML front matter:"),s("pre",null,s("code",o({parentName:"pre"},{className:"language-md"}),"---\ntitle: my page\ntags:\n  - tag1\n  - tag2\n---\n")),s("p",null,"This will be collected as:"),s("pre",null,s("code",o({parentName:"pre"},{className:"language-json"}),'{ "title": "my page", "tags": ["tag1", "tag2"] }\n')),s("blockquote",null,s("p",{parentName:"blockquote"},"As you can see, YAML front matter can express some simple data structure(.e.g array), while a docblock's properties can only express strings. A qualified theme should understand both of these.")),s("h2",null,"Runtime data"),s("p",null,"Runtime page data is whatever value you export from a page file. It contains the actual content of the page."),s("p",null,"Most themes(.e.g ",s(r,{to:"/basic-theme",mdxType:"Link"},"the basic theme"),") ask users to ",s("inlineCode",{parentName:"p"},"export default")," a React component from each page file. But that is not a requirement from vite-pages core. We will talk about this later."),s("h2",null,"Difference"),s("p",null,"Both static data and runtime data are passed to the theme, so the theme can use them to render the app."),s("p",null,"Difference:"),s("ul",null,s("li",{parentName:"ul"},"Static data of ",s("strong",{parentName:"li"},"all pages")," is loaded ",s("strong",{parentName:"li"},"eagerly")," when the app bootstrap. So you should try to keep the static data small."),s("li",{parentName:"ul"},"Runtime data is loaded ",s("strong",{parentName:"li"},"lazily")," when user navigate to that page."),s("li",{parentName:"ul"},"The value type of static data is limited (string or simple object/array), while the value of runtime data can be any javascript value (.e.g a React component).")),s("h2",null,"How theme consume these data"),s("p",null,"As stated in ",s(r,{to:"/theme-customization",mdxType:"Link"},"the theme customization doc"),", a theme is a React compoent. It will be rendered by vite-pages core, and get useful info from props:"),s("ul",null,s("li",{parentName:"ul"},"All pages' static data"),s("li",{parentName:"ul"},"All runtime data that is already loaded"),s("li",{parentName:"ul"},"The current loading state of the app")),s("p",null,"Here is the interface of a theme:"),s(i,{mdxType:"ThemeInterface"}),s("blockquote",null,s("p",{parentName:"blockquote"},"Here is an example implementation of vite-pages theme: ",s("a",o({parentName:"p"},{href:"https://github.com/vitejs/vite-plugin-react-pages/blob/master/packages/theme-basic/src/index.tsx"}),"vite-pages-theme-basic"),". ",s("a",o({parentName:"p"},{href:"https://github.com/vitejs/vite-plugin-react-pages/blob/master/packages/playground/use-theme/pages/_theme.tsx"}),"This fixture")," demonstrate how to use it.")),s("h2",null,"Vite-pages core doesn't care what your page data looks like"),s("p",null,"Vite-pages itself doesn't care what the page data looks like. How to interpret the page data and render the view, is totally decided by ",s(r,{to:"/theme-customization",mdxType:"Link"},"the theme"),'. Vite-pages just collect your pages data and pass them to the theme. This design make the vite-pages core more "simple" and make themes more powerful.'),s("p",null,"Most themes(.e.g ",s(r,{to:"/basic-theme",mdxType:"Link"},"the basic theme"),") ask users to ",s("inlineCode",{parentName:"p"},"export default")," a React component from each page file. But that is not a requirement from vite-pages core."),s("h2",null,"Advanced topic: how vite-pages represent page data internally"),s("p",null,"Internally, vite-pages stores all pages' data inside a data structure like this:"),s("pre",null,s("code",o({parentName:"pre"},{className:"language-ts"}),'interface PagesData {\n  // pages are indexed by pageId which is route path like "/dir/page3"\n  [pageId: string]: {\n    // each page contains runtimeData and staticData\n    data: {\n      // the values are paths to the runtime data modules\n      [key: string]: string\n    }\n    staticData: {\n      // the values are serializable\n      [key: string]: any\n    }\n  }\n}\n')),s("h3",null,"Composed page data"),s("p",null,"You may wonder why runtimeData and staticData are maps and we use a ",s("inlineCode",{parentName:"p"},"key")," to index into them. This is because ",s("strong",{parentName:"p"},"vite-pages let users create a page with multiple data pieces that originate from multiple files."),"\nMost filesystem routing mechanism out there assume that each page map to only one file. But vite-pages doesn't enforce that rule! This make page data more flexible and programable."),s("p",null,"Checkout ",s(r,{to:"/advanced-fs-routing",mdxType:"Link"},"the advanced-fs-routing doc")," or ",s(r,{to:"/examples/component-library",mdxType:"Link"},'"Example: develop a component library"')," to learn about how to create a page with multiple data pieces that originate from multiple files."))}m.isMDXComponent=!0;var u=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:m});const d={};d.main=u;export default d;
