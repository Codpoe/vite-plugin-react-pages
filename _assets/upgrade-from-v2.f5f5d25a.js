var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,r)=>{for(var i in r||(r={}))t.call(r,i)&&o(e,i,r[i]);if(a)for(var i of a(r))n.call(r,i)&&o(e,i,r[i]);return e};import{c as i,L as l}from"./clientRender.4d8779ba.js";const p={};function s(e){var{components:o}=e,s=((e,o)=>{var r={};for(var i in e)t.call(e,i)&&o.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&a)for(var i of a(e))o.indexOf(i)<0&&n.call(e,i)&&(r[i]=e[i]);return r})(e,["components"]);return i("wrapper",r(r(r({},p),s),{components:o,mdxType:"MDXLayout"}),i("h1",null,"Upgrade from v2"),i("h2",null,"Upgrade package versions"),i("p",null,"Upgrade these package versions:"),i("pre",null,i("code",r({parentName:"pre"},{className:"language-json"}),'{\n  "devDependencies": {\n    "@vitejs/plugin-react-refresh": "^1.3.1",\n    "vite": "^2.0.5",\n    "vite-plugin-mdx": "^3.3.1",\n    "vite-plugin-react-pages": "^3.0.0",\n    "vite-pages-theme-basic": "^3.0.0"\n  }\n}\n')),i("h2",null,"Install peerDependencies for mdx"),i("p",null,i("inlineCode",{parentName:"p"},"vite-plugin-mdx")," no longer install mdx-related peerDependencies for you. You should install them in your project:"),i("pre",null,i("code",r({parentName:"pre"},{className:"language-json"}),'{\n  "devDependencies": {\n    "@mdx-js/mdx": "^1.6.22",\n    "@mdx-js/react": "^1.6.22"\n  }\n}\n')),i("blockquote",null,i("p",{parentName:"blockquote"},i("a",r({parentName:"p"},{href:"https://github.com/brillout/vite-plugin-mdx"}),"vite-plugin-mdx")," has been moved to a seperate repo. (",i("a",r({parentName:"p"},{href:"https://github.com/vitejs/vite-plugin-react-pages/issues/6"}),"related issue"),")")),i("h2",null,"A Small update to theme API"),i("blockquote",null,i("p",{parentName:"blockquote"},i("strong",{parentName:"p"},"If you have only used the basic theme and haven't created a custom theme. You don't need to care about this API change."))),i("p",null,"In ",i("inlineCode",{parentName:"p"},"vite-plugin-react-pages@3.x"),", vite-pages don't pass staticData to the theme component any more. You should use the hook ",i("inlineCode",{parentName:"p"},"useStaticData")," to get staticData. This API update is for less prop drilling and more efficient HMR update during dev."),i("pre",null,i("code",r({parentName:"pre"},{className:"language-ts"}),"interface ThemeProps {\n  // staticData is removed, use useStaticData instead\n  readonly loadedData: PagesLoaded\n  readonly loadState: LoadState\n}\n\n/**\n * A react hook to get static data.\n * import { useStaticData } from 'vite-plugin-react-pages/client'\n */\nexport interface UseStaticData {\n  (): PagesStaticData\n  (path: string): Record<string, any>\n}\n")),i("p",null,"Here is an ",i("a",r({parentName:"p"},{href:"https://github.com/vitejs/vite-plugin-react-pages/commit/61f0fa0223ef28c526dfc7bd87bafd8de2523c38#diff-e18e1392eaf0be6f307cc5ba266f589b1517c4d991d6e0d5006c339fbe4b7ff6"}),"example upgrade commit"),"."),i("h2",null,"findPages API change"),i("blockquote",null,i("p",{parentName:"blockquote"},i("strong",{parentName:"p"},'If you have only used the "Basic Filesystem Routing Convention" and haven\'t used ',i("inlineCode",{parentName:"strong"},"findPages"),' to do "Advanced Filesystem Routing". You don\'t need to care about this API change.'))),i("p",null,"Previously, ",i("inlineCode",{parentName:"p"},"vite-plugin-react-pages")," don't react to the change from the fileSystem. If there is file add/update/unlink that will result in different pageData, you need to restart the dev server.\nIn ",i("inlineCode",{parentName:"p"},"vite-plugin-react-pages@3.x"),", vite-pages use chokidar to scan the fileSystem and watch for files."),i("blockquote",null,i("p",{parentName:"blockquote"},"Thanks ",i("a",r({parentName:"p"},{href:"https://github.com/aleclarson"}),"Alec Larson")," for the idea and initial implementation.")),i("p",null,'In order to handle the change from from the fileSystem, the "Advanced Filesystem Routing" API has changed from the ',i("inlineCode",{parentName:"p"},"findPages")," API to the ",i("inlineCode",{parentName:"p"},"pageStrategy")," API. Checkout ",i(l,{to:"/advanced-fs-routing",mdxType:"Link"},"the advanced-fs-routing doc")," to learn about the latest API."))}s.isMDXComponent=!0;var d=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:s});const c={};c.main=d;export default c;
