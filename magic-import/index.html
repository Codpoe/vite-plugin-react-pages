<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üìòVite Pages</title>
<link rel="stylesheet" href="/vite-plugin-react-pages/_assets/style.2c539fd7.css">
<link rel="modulepreload" href="/vite-plugin-react-pages/_assets/magic-import$.16fb2346.js" />
</head>
<body>
  <script>window._vitePagesSSR={"pagePublicPath":"/magic-import","pageData":"/vite-plugin-react-pages/_assets/magic-import$.16fb2346.js"};</script>
<div id="root"><div class="layout_eef6d5a0"><div class="topBar_2cc3af24"><div class="logo_2cc3af24">Vite Pages</div><div class="navs_2cc3af24"><ul class="navsList_2cc3af24"><li><a href="https://github.com/csr632/vite-pages-example" target="_blank" class="navsListItem_2cc3af24">üéÆ Example</a></li><li><a href="https://github.com/vitejs/vite-plugin-react-pages" target="_blank" class="navsListItem_2cc3af24">‚≠ê Github</a></li></ul></div></div><div class="body_eef6d5a0"><ul class="sideMenu_35ebcd6a"><li><a href="/vite-plugin-react-pages/">Introduction</a></li><li><a href="/vite-plugin-react-pages/fs-routing">FS Routing</a></li><li><a href="/vite-plugin-react-pages/theme">Theme</a></li><li><a href="/vite-plugin-react-pages/page-data">Page data</a></li><li><a href="/vite-plugin-react-pages/magic-import">Magic Import</a></li><li><a href="/vite-plugin-react-pages/advanced-fs-routing">Advanced FS Routing</a></li></ul><div class="content_eef6d5a0 markdown-body"><h1>Magic import</h1><p>Vite-pages support &quot;magic import&quot;. Magic import is <strong>normal esModule import sytax</strong> with <strong>tailored path convention</strong>. It enable users to import things with special behavior. Users can use it to do powerful things.</p><blockquote><p>If you are familiar with webpack loader mechanism, you can easily understand how magic import works.</p></blockquote><h2>Analyze source code</h2><p>When you are documenting for some JavaScript/Typescript library, you normally want to show some js/ts code to readers. This magic import help you load source code from a module. It is kind of like <a href="https://webpack.js.org/loaders/raw-loader/">raw-loader from webpack</a>. This is very useful for demo code displaying.</p><p>You can get the module tree analysis by importing the module with query <code>?analyzeSource</code>.</p><p>For example:</p><div><pre class="prism-code language-ts" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> demoSource </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../demos/demo1?analyzeSource&#x27;</span></div></pre></div><p>will give you:</p><div><pre class="prism-code language-ts" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;entry&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;demo1.tsx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;modules&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dir/util.ts&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;export default (txt: string) =&gt; {\n  console.log(&#x27;util:&#x27; + txt)\n}\n&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;demo1.module.css&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.box {\n  border: 1px solid black;\n  padding: 16px;\n}\n\n.title {\n  margin-top: 0;\n  margin-bottom: 8px;\n  color: blue;\n}\n&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;demo1.tsx&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;import React, { useState, useEffect, useCallback } from &#x27;react&#x27;\n// This is an external library used by demo\nimport { Button } from &#x27;antd&#x27;\nimport &#x27;antd/dist/antd.css&#x27;\n\nimport util from &#x27;./dir/util&#x27;\nimport style from &#x27;./demo1.module.css&#x27;\n\ninterface IProps {}\n\nconst Demo1: React.FC&lt;IProps&gt; = (props) =&gt; {\n  useEffect(() =&gt; {\n    util(&#x27;demo1&#x27;)\n  }, [])\n\n  return (\n    &lt;div className={style.box}&gt;\n      &lt;h1 className={style.title}&gt;This demo use a library&lt;/h1&gt;\n      &lt;Button type=\&quot;primary\&quot;&gt;Primary Button&lt;/Button&gt;\n    &lt;/div&gt;\n  )\n}\n\nexport default Demo1\n&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;externals&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^16.13.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;antd&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^4.4.1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><p>Checkout the <a href="https://github.com/vitejs/vite-plugin-react-pages/blob/master/fixtures/analyze-source-code/pages/index$.tsx">analyze-source-code fixture</a> for an example.</p><h3>Relative module dependencies</h3><p>Relative module dependencies(.e.g <code>import util from &#x27;./dir/util.ts&#x27;</code>) will also be collected into the analyze result, as shown by the previous example.</p><p>Relative module import can be:</p><ul><li>js, jsx, ts, tsx</li><li>css</li><li>Sass. You need to install <code>node-sass</code></li><li>Stylus. You need to install <code>stylus</code></li><li>Less. You need to install <code>less</code></li></ul><h3>External module dependencies</h3><p>For those dependencies from <code>node_modules</code> (.e.g <code>import React from &#x27;react&#x27;</code>), this magic import will not load source code for them. Instead, the dependencies&#x27; versions are recorded, as shown by the previous example.</p><p>This magic import gets dependencies&#x27; versions by find <code>package.json</code> up from the importer, and find the package version from these <code>package.json</code> fields:</p><ul><li><code>peerDependencies</code></li><li><code>devDependencies</code></li><li><code>dependencies</code></li><li><code>demoDependencies</code></li></ul><h2>More magic imports?</h2><p>If you come up with more useful magic imports, <a href="https://github.com/vitejs/vite-plugin-react-pages/issues">feel free to open an issue or PR</a>. Contributions are always welcomed!</p></div></div></div></div>
  
<script type="module" src="/vite-plugin-react-pages/_assets/clientRender.ea52bbdb.js"></script>
</body>
</html>
