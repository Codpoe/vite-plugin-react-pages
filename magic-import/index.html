<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üìòVite Pages</title>
<link rel="stylesheet" href="/vite-plugin-react-pages/_assets/style.4ef7a576.css">
<link rel="modulepreload" href="/vite-plugin-react-pages/_assets/magic-import$.dc70ff1f.js" />
</head>
<body>
  <script>window._vitePagesSSR={"pagePublicPath":"/magic-import","pageData":"/vite-plugin-react-pages/_assets/magic-import$.dc70ff1f.js"};</script>
<div id="root"><section class="vp-theme-shell vp-theme-shell-desktop vp-theme-shell-light style-module_layout__3vPKW" device="desktop"><header class="vp-theme-shell-header"><div class="vp-theme-shell-branding">Vite Pages<!-- --> </div><div class="vp-theme-shell-action"><ul role="listbox" class="vp-theme-menu vp-theme-hoz vp-theme-nav vp-theme-normal vp-theme-active vp-theme-bottom vp-theme-nav-embeddable" aria-multiselectable="false"><li role="option" tabindex="0" class="vp-theme-menu-item vp-theme-nav-item"><div class="vp-theme-menu-item-inner"><span class="vp-theme-menu-item-text" aria-selected="false"><a href="https://github.com/vitejs/vite-plugin-react-pages" target="_blank">‚≠ê Github</a></span></div></li></ul></div></header><section class="vp-theme-shell-main"><aside class="vp-theme-aside-navigation"><div class="vp-theme-shell-navigation vp-theme-shell-mini vp-theme-shell-aside"><ul role="listbox" class="vp-theme-menu vp-theme-ver vp-theme-nav vp-theme-normal vp-theme-active vp-theme-left vp-theme-nav-embeddable" aria-multiselectable="false"><li role="option" tabindex="0" class="vp-theme-menu-item vp-theme-nav-item"><div class="vp-theme-menu-item-inner"><span class="vp-theme-menu-item-text" aria-selected="false"><a href="/vite-plugin-react-pages/">Introduction</a></span></div></li><li role="option" tabindex="-1" class="vp-theme-menu-item vp-theme-nav-item"><div class="vp-theme-menu-item-inner"><span class="vp-theme-menu-item-text" aria-selected="false"><a href="/vite-plugin-react-pages/fs-routing">FS Routing</a></span></div></li><li role="option" tabindex="-1" class="vp-theme-menu-item vp-theme-nav-item"><div class="vp-theme-menu-item-inner"><span class="vp-theme-menu-item-text" aria-selected="false"><a href="/vite-plugin-react-pages/theme">Theme</a></span></div></li><li role="option" tabindex="-1" class="vp-theme-menu-item vp-theme-nav-item"><div class="vp-theme-menu-item-inner"><span class="vp-theme-menu-item-text" aria-selected="false"><a href="/vite-plugin-react-pages/page-data">Page data</a></span></div></li><li role="option" tabindex="-1" class="vp-theme-menu-item vp-theme-nav-item"><div class="vp-theme-menu-item-inner"><span class="vp-theme-menu-item-text" aria-selected="false"><a href="/vite-plugin-react-pages/magic-import">Magic Import</a></span></div></li><li role="option" tabindex="-1" class="vp-theme-menu-item vp-theme-nav-item"><div class="vp-theme-menu-item-inner"><span class="vp-theme-menu-item-text" aria-selected="false"><a href="/vite-plugin-react-pages/advanced-fs-routing">Advanced FS Routing</a></span></div></li></ul></div></aside><section class="vp-theme-shell-sub-main"><div class="vp-theme-shell-content style-module_content__2Czcn"><div class="vp-theme-shell-content-inner"><div class=" markdown-body"><h1>Magic import</h1><p>Vite-pages support &quot;magic import&quot;. Magic import is <strong>normal esModule import sytax</strong> with <strong>tailored path convention</strong>. It enable users to import things with special behavior. Users can use it to do powerful things.</p><blockquote><p>If you are familiar with webpack loader mechanism, you can easily understand how magic import works.</p></blockquote><h2>Analyze source code</h2><p>When you are documenting for some JavaScript/Typescript library, you normally want to show some js/ts code to readers. This magic import help you load source code from a module. It is kind of like <a href="https://webpack.js.org/loaders/raw-loader/">raw-loader from webpack</a>. This is very useful for demo code displaying.</p><p>You can get the module tree analysis by importing the module with query <code>?analyzeSource</code>.</p><p>For example:</p><div><pre class="prism-code language-ts" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> demoSource </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../demos/demo1?analyzeSource&#x27;</span></div></pre></div><p>will give you:</p><div><pre class="prism-code language-ts" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;entry&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;demo1.tsx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;modules&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dir/util.ts&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;export default (txt: string) =&gt; {\n  console.log(&#x27;util:&#x27; + txt)\n}\n&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;demo1.module.css&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.box {\n  border: 1px solid black;\n  padding: 16px;\n}\n\n.title {\n  margin-top: 0;\n  margin-bottom: 8px;\n  color: blue;\n}\n&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;demo1.tsx&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;import React, { useState, useEffect, useCallback } from &#x27;react&#x27;\n// This is an external library used by demo\nimport { Button } from &#x27;antd&#x27;\nimport &#x27;antd/dist/antd.css&#x27;\n\nimport util from &#x27;./dir/util&#x27;\nimport style from &#x27;./demo1.module.css&#x27;\n\ninterface IProps {}\n\nconst Demo1: React.FC&lt;IProps&gt; = (props) =&gt; {\n  useEffect(() =&gt; {\n    util(&#x27;demo1&#x27;)\n  }, [])\n\n  return (\n    &lt;div className={style.box}&gt;\n      &lt;h1 className={style.title}&gt;This demo use a library&lt;/h1&gt;\n      &lt;Button type=\&quot;primary\&quot;&gt;Primary Button&lt;/Button&gt;\n    &lt;/div&gt;\n  )\n}\n\nexport default Demo1\n&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;externals&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^16.13.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;antd&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^4.4.1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><p>Checkout the <a href="https://github.com/vitejs/vite-plugin-react-pages/blob/master/fixtures/analyze-source-code/pages/index$.tsx">analyze-source-code fixture</a> for an example.</p><h3>Relative module dependencies</h3><p>Relative module dependencies(.e.g <code>import util from &#x27;./dir/util.ts&#x27;</code>) will also be collected into the analyze result, as shown by the previous example.</p><p>Relative module import can be:</p><ul><li>js, jsx, ts, tsx</li><li>css</li><li>Sass. You need to install <code>node-sass</code></li><li>Stylus. You need to install <code>stylus</code></li><li>Less. You need to install <code>less</code></li></ul><h3>External module dependencies</h3><p>For those dependencies from <code>node_modules</code> (.e.g <code>import React from &#x27;react&#x27;</code>), this magic import will not load source code for them. Instead, the dependencies&#x27; versions are recorded, as shown by the previous example.</p><p>This magic import gets dependencies&#x27; versions by find <code>package.json</code> up from the importer, and find the package version from these <code>package.json</code> fields:</p><ul><li><code>peerDependencies</code></li><li><code>devDependencies</code></li><li><code>dependencies</code></li><li><code>demoDependencies</code></li></ul><h2>More magic imports?</h2><p>If you come up with more useful magic imports, <a href="https://github.com/vitejs/vite-plugin-react-pages/issues">feel free to open an issue or PR</a>. Contributions are always welcomed!</p></div></div></div></section></section></section></div>
  
<script type="module" src="/vite-plugin-react-pages/_assets/clientRender.5ee1435f.js"></script>
<script type="module" src="/vite-plugin-react-pages/_assets/$.3b9d335e.js"></script>
<script type="module" src="/vite-plugin-react-pages/_assets/advanced-fs-routing$.3df340d1.js"></script>
<script type="module" src="/vite-plugin-react-pages/_assets/404$.510d4145.js"></script>
<script type="module" src="/vite-plugin-react-pages/_assets/theme$.f06c359a.js"></script>
<script type="module" src="/vite-plugin-react-pages/_assets/fs-routing$.300baef6.js"></script>
<script type="module" src="/vite-plugin-react-pages/_assets/page-data$.11cffadd.js"></script>
<script type="module" src="/vite-plugin-react-pages/_assets/magic-import$.dc70ff1f.js"></script>
</body>
</html>
